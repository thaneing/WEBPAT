@using Microsoft.AspNetCore.Http;
@{
    Boolean CheckPermision(string usertype, string permision, string page)
    {



        if (usertype != "3") //เช็คว่าเป็น SupperAdmin ไหม หากเป็น ไม่ใช่ User SupperAdmin ให้เช็คตาม Page
        {
            var data = permision;
            string[] words = data.Split(',');
            foreach (string word in words)
            {
                if (word == page)
                {
                    return true;
                }
            }
            return false;
        }
        else
        {
            return true;   //กรณี เป็น Suppoer Admin ให้ Pass Only
        }

    }

}



<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>@ViewData["Title"] - C.E.S</title>


    <link href="~/css/bootstrap.min.css" rel="stylesheet">

    <link rel="stylesheet" href="~/plugins/jquery-ui-1.12.1/jquery-ui.css" />

    <link href="~/lib_bower/font-awesome/css/font-awesome.css" rel="stylesheet">

    <link href="~/css/plugins/iCheck/custom.css" rel="stylesheet">

    <link href="~/css/plugins/steps/jquery.steps.css" rel="stylesheet">

    <!-- Toastr style -->
    <link href="~/css/plugins/toastr/toastr.min.css" rel="stylesheet">


    <link href="~/css/plugins/jQueryUI/jquery-ui-1.10.4.custom.min.css" rel="stylesheet">


    <!-- Date Picker -->
    <link rel="stylesheet" href="~/plugins/DateTimePicker/bootstrap-datetimepicker.min.css">

    <!-- Daterange picker -->
    <link href="~/node_modules/bootstrap-daterangepicker/daterangepicker.css" rel="stylesheet" />

    <!-- bootstrap wysihtml5 - text editor -->
    <link rel="stylesheet" href="~/node_modules/bootstrap3-wysihtml5-npm/dist/bootstrap3-wysihtml5.min.css">

    <!--Modall-->
    <link rel="stylesheet" href="~/plugins/Modaal/dist/css/modaal.css" />

    <link rel="stylesheet" href="~/plugins/c3/c3.min.css" />

    @*<link href="~/css/plugins/dataTables/datatables.min.css" rel="stylesheet">*@

    <!--Datatable-->

    <link href="~/node_modules/datatables.net-dt/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="~/node_modules/datatables.net-autofill-dt/css/autoFill.dataTables.min.css" rel="stylesheet" />
    <link href="~/node_modules/datatables.net-buttons-dt/css/buttons.dataTables.css" rel="stylesheet" />
    <link href="~/node_modules/datatables.net-colreorder-dt/css/colReorder.dataTables.min.css" rel="stylesheet" />
    <link href="~/node_modules/datatables.net-fixedcolumns-dt/css/fixedColumns.dataTables.min.css" rel="stylesheet" />
    <link href="~/node_modules/datatables.net-fixedheader-dt/css/fixedHeader.dataTables.min.css" rel="stylesheet" />
    <link href="~/node_modules/datatables.net-keytable-dt/css/keyTable.dataTables.min.css" rel="stylesheet" />
    <link href="~/node_modules/datatables.net-responsive-dt/css/responsive.dataTables.min.css" rel="stylesheet" />
    <link href="~/node_modules/datatables.net-rowgroup-dt/css/rowGroup.dataTables.min.css" rel="stylesheet" />
    <link href="~/node_modules/datatables.net-rowreorder-dt/css/rowReorder.dataTables.min.css" rel="stylesheet" />
    <link href="~/node_modules/datatables.net-scroller-dt/css/scroller.dataTables.min.css" rel="stylesheet" />
    <link href="~/node_modules/datatables.net-select-dt/css/select.dataTables.min.css" rel="stylesheet" />

    <link href="~/plugins/DatatableSearchPanel/dataTables.searchPane.min.css" rel="stylesheet" />




    <!-- Step-->
    <link href="~/css/plugins/steps/jquery.steps.css" rel="stylesheet">


    <!-- fullCalendar -->
    <link rel="stylesheet" href="~/node_modules/fullcalendar/dist/fullcalendar.min.css">
    <link rel="stylesheet" href="~/node_modules/fullcalendar/dist/fullcalendar.print.min.css" media="print">


    <link rel="stylesheet" href="~/plugins/select2/dist/css/select2.min.css" />
    <link rel="stylesheet" href="~/plugins/select2/dist/css/select2.css" />




    <!-- DevExpress-->
    @*<link href="~/css/devextreme/bootstrap.css" rel="stylesheet" />*@
    @*<link rel="stylesheet" href="~/css/site.css" />*@

    <link href="~/devextreme/css/dx.common.css" rel="stylesheet" />
    <link href="~/devextreme/CSS/dx.light.css" rel="stylesheet" />





    <script src="~/devextreme/JS/jquery.js"></script>
    <script src="~/devextreme/js/bootstrap.js"></script>

    <script src="~/devextreme/JS/cldr.js"></script>
    <script src="~/devextreme/JS/cldr/event.js"></script>
    <script src="~/devextreme/JS/cldr/supplemental.js"></script>
    <script src="~/devextreme/JS/cldr/unresolved.js"></script>

    <script src="~/devextreme/JS/globalize.js"></script>
    <script src="~/devextreme/JS/globalize/message.js"></script>
    <script src="~/devextreme/JS/globalize/number.js"></script>
    <script src="~/devextreme/JS/globalize/currency.js"></script>
    <script src="~/devextreme/JS/globalize/date.js"></script>

    <script src="~/devextreme/JS/jszip.js"></script>
    <script src="~/devextreme/js/dx.all.js"></script>

    <script src="~/devextreme/js/vectormap-data/world.js"></script>

    <script src="~/devextreme/js/aspnet/dx.aspnet.mvc.js"></script>
    <script src="~/devextreme/js/aspnet/dx.aspnet.data.js"></script>




    <link href="~/css/devextreme/dx.common.css" rel="stylesheet" />
    <link href="~/css/devextreme/dx.light.css" rel="stylesheet" />






    <link href="~/css/animate.css" rel="stylesheet">
    <link href="~/css/style.css" rel="stylesheet">




    <!-- sweetAlert-->
    <script src="~/node_modules/sweetAlert/dist/sweetalert.min.js"></script>





    <style>

        /* The device with borders */
        .smartphone {
            position: relative;
            width: 360px;
            height: 640px;
            margin: auto;
            border: 16px black solid;
            border-top-width: 60px;
            border-bottom-width: 60px;
            border-radius: 36px;
        }

            /* The horizontal line on the top of the device */
            .smartphone:before {
                content: '';
                display: block;
                width: 60px;
                height: 5px;
                position: absolute;
                top: -30px;
                left: 50%;
                transform: translate(-50%, -50%);
                background: #333;
                border-radius: 10px;
            }

            /* The circle on the bottom of the device */
            .smartphone:after {
                content: '';
                display: block;
                width: 35px;
                height: 35px;
                position: absolute;
                left: 50%;
                bottom: -65px;
                transform: translate(-50%, -50%);
                background: #333;
                border-radius: 50%;
            }

            /* The screen (or content) of the device */
            .smartphone .content {
                width: 360px;
                height: 640px;
                background: white;
            }


        /* The device with borders */
        .tablet {
            position: relative;
            width: 768px;
            height: 1024px;
            margin: auto;
            border: 16px black solid;
            border-top-width: 60px;
            border-bottom-width: 60px;
            border-radius: 36px;
        }

            /* The horizontal line on the top of the device */
            .tablet:before {
                content: '';
                display: block;
                width: 60px;
                height: 5px;
                position: absolute;
                top: -30px;
                left: 50%;
                transform: translate(-50%, -50%);
                background: #333;
                border-radius: 10px;
            }

            /* The circle on the bottom of the device */
            .tablet:after {
                content: '';
                display: block;
                width: 35px;
                height: 35px;
                position: absolute;
                left: 50%;
                bottom: -65px;
                transform: translate(-50%, -50%);
                background: #333;
                border-radius: 50%;
            }

            /* The screen (or content) of the device */
            .tablet .content {
                width: 768px;
                height: 1024px;
                background: white;
                margin: -1px;
            }
        /* The laptop with borders */
        .laptop {
            -webkit-transform-origin: 0 0;
            transform-origin: 0 0;
            -webkit-transform: scale(.6) translate(-50%); /* Scaled down for a better Try-it experience (change to 1 for full scale) */
            transform: scale(.6) translate(-50%); /* Scaled down for a better Try-it experience (change to 1 for full scale) */
            left: 50%;
            position: absolute;
            width: 1366px;
            height: 800px;
            border-radius: 6px;
            border-style: solid;
            border-color: black;
            border-width: 24px 24px 80px;
            background-color: black;
        }

            /* The keyboard of the laptop */
            .laptop:after {
                content: '';
                display: block;
                position: absolute;
                width: 1600px;
                height: 60px;
                margin: 80px 0 0 -110px;
                background: black;
                border-radius: 6px;
            }

            /* The top of the keyboard */
            .laptop:before {
                content: '';
                display: block;
                position: absolute;
                width: 250px;
                height: 30px;
                bottom: -110px;
                left: 50%;
                -webkit-transform: translate(-50%);
                transform: translate(-50%);
                background: #f1f1f1;
                border-bottom-left-radius: 5px;
                border-bottom-right-radius: 5px;
                z-index: 1;
            }

            /* The screen (or content) of the device */
            .laptop .content {
                width: 1366px;
                height: 800px;
                overflow: hidden;
                border: none;
            }
    </style>





    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- ./wrapper -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Google Font -->




</head>


<body class="skin-1" onload="getLocation();" sty>
    <div id="wrapper">
        <nav class="navbar-default navbar-static-side" role="navigation">
            <div class="sidebar-collapse">
                <ul class="nav metismenu" id="side-menu">
                    <li class="nav-header">
                        @if (@Context.Session.GetString("Userid") != null)
                        {
                            <!---User Detail-->
                            <div class="dropdown profile-element">
                                <span>
                                    <a href="~/images/Users/512/@Context.Session.GetString("Pic")" class="modaal-image gallery-thumb" data-modaal-desc="@Context.Session.GetString("TitleOfUserName")@Context.Session.GetString("Firstname") @Context.Session.GetString("Lastname")"><img alt="image" class="img-circle" src="~/images/Users/64/@Context.Session.GetString("Pic")" /></a>
                                </span>
                                <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                                    <span class="clear">
                                        <span class="block m-t-xs">
                                            <strong class="font-bold">@Context.Session.GetString("TitleOfUserName")@Context.Session.GetString("Firstname") &nbsp; @Context.Session.GetString("Lastname")</strong>
                                        </span> <span class="text-muted text-xs block">@Context.Session.GetString("PositionName") <b class="caret"></b></span>
                                    </span>
                                </a>
                                <ul class="dropdown-menu animated fadeInRight m-t-xs">
                                    <li><a asp-controller="Users" asp-action="Details" asp-route-id="@Context.Session.GetInt32("Userid")">Profile</a></li>
                                    <li><a asp-controller="Users" asp-action="EditUsername" asp-route-id="@Context.Session.GetInt32("Userid")">Change Password</a></li>
                                    <li class="divider"></li>
                                    <li><a asp-controller="Accounts" asp-action="Logout">Logout</a></li>
                                </ul>
                            </div>
                            <div class="logo-element">
                                <span style="color:rgb(0,174,239)">C.E.S</span>
                            </div>
                            <!--///-->
                        }


                    </li>

                    <li>
                        <a asp-controller="Home" asp-action="Index"><i class="fa fa-th-large"></i> <span class="nav-label">Home</span></a>
                    </li>



                    <li><a asp-controller="ShowManual" asp-action="Index"><i class="fa fa-book"></i><span class="nav-label"> Manual</span></a></li>
                    @if (@Context.Session.GetString("Userid") != null)
                    {
                        var page = "1";
                        if (CheckPermision(@Context.Session.GetString("TypeOfUserId"), @Context.Session.GetString("PermisionAction"), page) == true)
                        {
                            <li><a asp-controller="Blogs" asp-action="Index"><i class="fa fa-newspaper-o"></i>  <span class="nav-label">News & Activity</span></a></li>
                        }
                    }


                
       

                    <li id="erp_head">

                        <a href="#"><i class="fa fa-sitemap"></i> <span class="nav-label">ERP Operators</span><span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level collapse" id="erp">





                            @if (@Context.Session.GetString("Userid") != null)
                            {
                                var page = "41";
                                if (CheckPermision(@Context.Session.GetString("TypeOfUserId"), @Context.Session.GetString("PermisionAction"), page) == true)
                                {
                            <li><a asp-controller="ItemLedgerEntrys" asp-action="Index">ItemMetrix</a></li>
                                }
                            }
                   
                            @if (@Context.Session.GetString("Userid") != null)
                            {
                                var page = "274";
                                if (CheckPermision(@Context.Session.GetString("TypeOfUserId"), @Context.Session.GetString("PermisionAction"), page) == true)
                                {
                            <li><a asp-controller="Outstandings" asp-action="Index">Ourstanding Report</a></li>
                                }
                            }

  
                        </ul>
                    </li>


                 

                  
                 

                    <li id="purchase_head">
                        <a href="#"><i class="fa fa-rub"></i> <span class="nav-label">Purchase</span><span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level collapse" id="purchase">



                            @if (@Context.Session.GetString("Userid") != null)
                            {
                                var page = "157";
                                if (CheckPermision(@Context.Session.GetString("TypeOfUserId"), @Context.Session.GetString("PermisionAction"), page) == true)
                                {
                                    <li><a asp-controller="ItemCodes" asp-action="Index"> ItemCode</a></li>

                                }
                            }


                            @if (@Context.Session.GetString("Userid") != null)
                            {
                                var page = "222";
                                if (CheckPermision(@Context.Session.GetString("TypeOfUserId"), @Context.Session.GetString("PermisionAction"), page) == true)
                                {
                                    <li><a asp-controller="ItemCodes" asp-action="Vendor"> VendorCode</a></li>

                                }
                            }
                           

                            @if (@Context.Session.GetString("Userid") != null)
                            {
                                var page = "211";
                                if (CheckPermision(@Context.Session.GetString("TypeOfUserId"), @Context.Session.GetString("PermisionAction"), page) == true)
                                {
                                    <li><a asp-controller="purchaseOrder" asp-action="Index" target="_blank"> Purchase Order Report</a></li>

                                }
                            }

                          


                        </ul>
                    </li>

                    @*<li><a asp-controller="ExternalLink" asp-action="Photo"><i class="fa fa-picture-o"></i> <span class="nav-label">Gallery</span></a></li>
                        <li><a asp-controller="ExternalLink" asp-action="Meeting"><i class="fa fa-black-tie"></i> <span class="nav-label">Meeting</span></a></li>
                        <li><a href="https://mail.ces.co.th/" target="_blank"><i class="fa fa-envelope "></i> <span class="nav-label">Web Mail</span></a></li>*@



                    <li><a asp-controller="Menuseting" asp-action="Index"><i class="fa fa-gears"></i> <span class="nav-label">Setting</span></a></li>

                </ul>

            </div>
        </nav>

        <div id="page-wrapper" class="gray-bg">
            <div class="row border-bottom">
                <nav class="navbar navbar-static-top" role="navigation" style="margin-bottom: 0">
                    <div class="navbar-header">
                        <a class="navbar-minimalize minimalize-styl-2 btn btn-primary"><i class="fa fa-bars"></i> </a>
                        <form role="search" class="navbar-form-custom" action="search_results.html">
                            <div class="form-group">
                                <input type="text" placeholder="Search for something..." class="form-control" name="top-search" id="top-search">
                            </div>
                        </form>
                    </div>
                    <ul class="nav navbar-top-links navbar-right">
                        <li>
                            <span class="m-r-sm text-muted welcome-message">Welcome to PAT Report</span>
                        </li>


                        <li>
                            <a asp-controller="Accounts" asp-action="Logout">
                                <i class="fa fa-sign-out"></i>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>









            <div class="row wrapper border-bottom white-bg page-heading">
                <!--- แสดงหน้าของ Site Map-->
                <div class="col-lg-10">
                    <h2>@ViewData["Title"]</h2>

                    @Html.Raw(@ViewData["Tab"])

                </div>

            </div>






            <div class="wrapper wrapper-content  animated fadeInRight">
                <div class="row">
                    <partial name="_CookieConsentPartial" />

                    @RenderBody()
                </div>
            </div>
            <div class="footer">
                <div class="pull-right">
                    <strong> Your IP :</strong>
                    @if (@Context.Session.GetString("Userid") != null)
                    {
                        @Context.Session.GetString("IPAddress");
                    }
                    <strong> Mac :</strong>

                    @if (@Context.Session.GetString("Userid") != null)
                    {
                        @Context.Session.GetString("Macaddress");
                    }
                    <strong> OS :</strong>

                    @if (@Context.Session.GetString("Userid") != null)
                    {
                        @Context.Session.GetString("OS");
                    }


                    @if (@Context.Session.GetString("Userid") != null)
                    {
                        @Context.Session.GetString("OSVersion");
                    }
                    <strong> Browser : </strong>

                    @if (@Context.Session.GetString("Userid") != null)
                    {
                        @Context.Session.GetString("Browser");
                    }


                    @if (@Context.Session.GetString("Userid") != null)
                    {
                        @Context.Session.GetString("BrowserVersion");
                    }

                    <span id="demo"></span>
                    Version : <strong>3.0.0</strong>
                </div>
                <div>
                    <strong>Copyright</strong> C.E.S Company &copy; 2019



                </div>
            </div>
        </div>
        <div class="theme-config">
            <div class="theme-config-box">
                <div class="spin-icon">
                    <i class="fa fa-cogs fa-spin"></i>
                </div>
                <div class="skin-settings">
                    <div class="title">
                        Configuration <br />
                        <small style="text-transform: none;font-weight: 400">
                            Config box designed for demo purpose. All options available via code.
                        </small>
                    </div>
                    <div class="setings-item">
                        <span>
                            Collapse menu
                        </span>

                        <div class="switch">
                            <div class="onoffswitch">
                                <input type="checkbox" name="collapsemenu" class="onoffswitch-checkbox" id="collapsemenu">
                                <label class="onoffswitch-label" for="collapsemenu">
                                    <span class="onoffswitch-inner"></span>
                                    <span class="onoffswitch-switch"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="setings-item">
                        <span>
                            Fixed sidebar
                        </span>

                        <div class="switch">
                            <div class="onoffswitch">
                                <input type="checkbox" name="fixedsidebar" class="onoffswitch-checkbox" id="fixedsidebar">
                                <label class="onoffswitch-label" for="fixedsidebar">
                                    <span class="onoffswitch-inner"></span>
                                    <span class="onoffswitch-switch"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="setings-item">
                        <span>
                            Top navbar
                        </span>

                        <div class="switch">
                            <div class="onoffswitch">
                                <input type="checkbox" name="fixednavbar" class="onoffswitch-checkbox" id="fixednavbar">
                                <label class="onoffswitch-label" for="fixednavbar">
                                    <span class="onoffswitch-inner"></span>
                                    <span class="onoffswitch-switch"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="setings-item">
                        <span>
                            Top navbar v.2
                            <br />
                            <small>*Primary layout</small>
                        </span>

                        <div class="switch">
                            <div class="onoffswitch">
                                <input type="checkbox" name="fixednavbar2" class="onoffswitch-checkbox" id="fixednavbar2">
                                <label class="onoffswitch-label" for="fixednavbar2">
                                    <span class="onoffswitch-inner"></span>
                                    <span class="onoffswitch-switch"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="setings-item">
                        <span>
                            Boxed layout
                        </span>

                        <div class="switch">
                            <div class="onoffswitch">
                                <input type="checkbox" name="boxedlayout" class="onoffswitch-checkbox" id="boxedlayout">
                                <label class="onoffswitch-label" for="boxedlayout">
                                    <span class="onoffswitch-inner"></span>
                                    <span class="onoffswitch-switch"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="setings-item">
                        <span>
                            Fixed footer
                        </span>

                        <div class="switch">
                            <div class="onoffswitch">
                                <input type="checkbox" name="fixedfooter" class="onoffswitch-checkbox" id="fixedfooter">
                                <label class="onoffswitch-label" for="fixedfooter">
                                    <span class="onoffswitch-inner"></span>
                                    <span class="onoffswitch-switch"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="title">Skins</div>
                    <div class="setings-item default-skin">
                        <span class="skin-name ">
                            <a href="#" class="s-skin-0">
                                Default
                            </a>
                        </span>
                    </div>
                    <div class="setings-item blue-skin">
                        <span class="skin-name ">
                            <a href="#" class="s-skin-1">
                                Blue light
                            </a>
                        </span>
                    </div>
                    <div class="setings-item yellow-skin">
                        <span class="skin-name ">
                            <a href="#" class="s-skin-3">
                                Yellow/Purple
                            </a>
                        </span>
                    </div>

                </div>
            </div>
        </div>
    </div>








    <!-- jQuery 3 -->
    <script src="~/node_modules/jquery/dist/jquery.min.js"></script>
    <!-- jQuery UI 1.11.4 -->
    <script src="~/js/popper.min.js"></script>


    <script src="~/plugins/jquery-ui-1.12.1/jquery-ui.js"></script>
    <script>
        $.widget.bridge('uibutton', $.ui.button);
    </script>


    <script src="~/plugins/JqueryUIContextMenu/jquery.ui-contextmenu.min.js"></script>


    <script src="~/js/bootstrap.min.js"></script>
    <script src="~/lib/@@aspnet/signalr/dist/browser/signalr.js"></script>
    <!-- daterangepicker -->
    <script src="~/node_modules/moment/min/moment.min.js"></script>
    <script src="~/node_modules/bootstrap-daterangepicker/daterangepicker.js"></script>
    <script src="~/plugins/DateTimePicker/bootstrap-datetimepicker.min.js"></script>





    <script src="~/js/plugins/metisMenu/jquery.metisMenu.js"></script>
    <script src="~/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

    <!-- Steps -->
    <script src="~/js/plugins/steps/jquery.steps.min.js"></script>

    <!--Modaal-->
    <script src="~/plugins/Modaal/dist/js/modaal.js"></script>





    <!-- Custom and plugin javascript -->
    <script src="~/js/inspinia.js"></script>
    <script src="~/js/plugins/pace/pace.min.js"></script>

    <!-- Toastr -->
    <script src="~/js/plugins/toastr/toastr.min.js"></script>


    <!---Set PDF MAKER-->
    <script src='~/node_modules/pdfmake/build/pdfmake.js'></script>
    <script src='~/node_modules/pdfmake/build/vfs_fonts.js'></script>

    @*<script src="~/js/plugins/dataTables/datatables.min.js"></script>*@




    <script src="~/js/plugins/typehead/bootstrap3-typeahead.min.js"></script>


    <script src="~/node_modules/datatables.net/js/jquery.dataTables.js"></script>
    <script src="~/node_modules/datatables.net-buttons/js/dataTables.buttons.js"></script>
    <script src="~/node_modules/datatables.net-buttons/js/buttons.colVis.js"></script>
    <script src="~/node_modules/datatables.net-buttons/js/buttons.html5.js"></script>
    <script src="~/node_modules/datatables.net-buttons/js/buttons.print.js"></script>
    <script src="~/node_modules/datatables.net-buttons/js/buttons.flash.js"></script>
    <script src="~/node_modules/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
    <script src="~/node_modules/datatables.net-colreorder/js/dataTables.colReorder.min.js"></script>
    <script src="~/node_modules/datatables.net-fixedcolumns/js/dataTables.fixedColumns.min.js"></script>
    <script src="~/node_modules/datatables.net-fixedheader/js/dataTables.fixedHeader.min.js"></script>
    <script src="~/node_modules/datatables.net-keytable/js/dataTables.keyTable.min.js"></script>
    <script src="~/node_modules/datatables.net-rowgroup/js/dataTables.rowGroup.min.js"></script>
    <script src="~/node_modules/datatables.net-rowreorder/js/dataTables.rowReorder.min.js"></script>
    <script src="~/node_modules/datatables.net-scroller/js/dataTables.scroller.min.js"></script>
    <script src="~/node_modules/datatables.net-select/js/dataTables.select.min.js"></script>

    <script src="~/plugins/DatatableSearchPanel/dataTables.searchPane.min.js"></script>


    <script src="~/node_modules/jszip/dist/jszip.min.js"></script>

    <script src="~/plugins/d3/d3.min.js"></script>
    <script src="~/plugins/c3/c3.min.js"></script>


    <!-- Excel Export -->
    <!-- add the shim first -->
    <script src="~/node_modules/es6-shim/es6-sham.js"></script>
    <!-- after the shim is referenced, add the library -->
    <script src="~/node_modules/whatwg-fetch/dist/fetch.umd.js"></script>

    <script src="~/node_modules/file-saverjs/FileSaver.min.js"></script>

    <script src="~/plugins/js-xlsx/xlsx.core.min.js"></script>

    <script src="~/plugins/js-xlsx/xlsx.js"></script>

    <script src='~/node_modules/tableexport/dist/js/tableexport.js'></script>



    <!-- iCheck -->
    <script src="~/js/plugins/iCheck/icheck.min.js"></script>

    <script src="~/bower_components/bahttext/src/index.js"></script>

    <!-- selectable-->
    <script src="~/plugins/select2/dist/js/select2.min.js"></script>
    <script src="~/plugins/select2/dist/js/select2.js"></script>
    <script src="~/plugins/select2/dist/js/select2.full.min.js"></script>
    <script src="~/plugins/select2/dist/js/select2.full.js"></script>



    <!-- Idle Timer plugin -->
    <script src="~/js/plugins/idle-timer/idle-timer.min.js"></script>


    <script src="~/plugins/Chart.js/Chart.bundle.js"></script>
    <script src="~/plugins/Chart.js/Chart.js"></script>

    <!--Fullcalendar-->
    <script src="~/node_modules/fullcalendar/dist/fullcalendar.min.js"></script>

    <!-- Steps -->
    <script src="~/js/plugins/steps/jquery.steps.min.js"></script>

    <!-- Jquery Validate -->
    <script src="~/js/plugins/validate/jquery.validate.min.js"></script>





    @await Html.PartialAsync("_NotificationPanel")

    <script>
        // Config box


        // Enable/disable fixed top navbar
        $('#fixednavbar').click(function () {
            if ($('#fixednavbar').is(':checked')) {
                $(".navbar-static-top").removeClass('navbar-static-top').addClass('navbar-fixed-top');
                $("body").removeClass('boxed-layout');
                $("body").addClass('fixed-nav');
                $('#boxedlayout').prop('checked', false);

                if (localStorageSupport) {
                    localStorage.setItem("boxedlayout", 'off');
                }

                if (localStorageSupport) {
                    localStorage.setItem("fixednavbar", 'on');
                }
            } else {
                $(".navbar-fixed-top").removeClass('navbar-fixed-top').addClass('navbar-static-top');
                $("body").removeClass('fixed-nav');
                $("body").removeClass('fixed-nav-basic');
                $('#fixednavbar2').prop('checked', false);

                if (localStorageSupport) {
                    localStorage.setItem("fixednavbar", 'off');
                }

                if (localStorageSupport) {
                    localStorage.setItem("fixednavbar2", 'off');
                }
            }
        });

        // Enable/disable fixed top navbar
        $('#fixednavbar2').click(function () {
            if ($('#fixednavbar2').is(':checked')) {
                $(".navbar-static-top").removeClass('navbar-static-top').addClass('navbar-fixed-top');
                $("body").removeClass('boxed-layout');
                $("body").addClass('fixed-nav').addClass('fixed-nav-basic');
                $('#boxedlayout').prop('checked', false);

                if (localStorageSupport) {
                    localStorage.setItem("boxedlayout", 'off');
                }

                if (localStorageSupport) {
                    localStorage.setItem("fixednavbar2", 'on');
                }
            } else {
                $(".navbar-fixed-top").removeClass('navbar-fixed-top').addClass('navbar-static-top');
                $("body").removeClass('fixed-nav').removeClass('fixed-nav-basic');
                $('#fixednavbar').prop('checked', false);

                if (localStorageSupport) {
                    localStorage.setItem("fixednavbar2", 'off');
                }
                if (localStorageSupport) {
                    localStorage.setItem("fixednavbar", 'off');
                }
            }
        });

        // Enable/disable fixed sidebar
        $('#fixedsidebar').click(function () {
            if ($('#fixedsidebar').is(':checked')) {
                $("body").addClass('fixed-sidebar');
                $('.sidebar-collapse').slimScroll({
                    height: '100%',
                    railOpacity: 0.9
                });

                if (localStorageSupport) {
                    localStorage.setItem("fixedsidebar", 'on');
                }
            } else {
                $('.sidebar-collapse').slimscroll({ destroy: true });
                $('.sidebar-collapse').attr('style', '');
                $("body").removeClass('fixed-sidebar');

                if (localStorageSupport) {
                    localStorage.setItem("fixedsidebar", 'off');
                }
            }
        });

        // Enable/disable collapse menu
        $('#collapsemenu').click(function () {
            if ($('#collapsemenu').is(':checked')) {
                $("body").addClass('mini-navbar');
                SmoothlyMenu();

                if (localStorageSupport) {
                    localStorage.setItem("collapse_menu", 'on');
                }

            } else {
                $("body").removeClass('mini-navbar');
                SmoothlyMenu();

                if (localStorageSupport) {
                    localStorage.setItem("collapse_menu", 'off');
                }
            }
        });

        // Enable/disable boxed layout
        $('#boxedlayout').click(function () {
            if ($('#boxedlayout').is(':checked')) {
                $("body").addClass('boxed-layout');
                $('#fixednavbar').prop('checked', false);
                $('#fixednavbar2').prop('checked', false);
                $(".navbar-fixed-top").removeClass('navbar-fixed-top').addClass('navbar-static-top');
                $("body").removeClass('fixed-nav');
                $("body").removeClass('fixed-nav-basic');
                $(".footer").removeClass('fixed');
                $('#fixedfooter').prop('checked', false);

                if (localStorageSupport) {
                    localStorage.setItem("fixednavbar", 'off');
                }

                if (localStorageSupport) {
                    localStorage.setItem("fixednavbar2", 'off');
                }

                if (localStorageSupport) {
                    localStorage.setItem("fixedfooter", 'off');
                }


                if (localStorageSupport) {
                    localStorage.setItem("boxedlayout", 'on');
                }
            } else {
                $("body").removeClass('boxed-layout');

                if (localStorageSupport) {
                    localStorage.setItem("boxedlayout", 'off');
                }
            }
        });

        // Enable/disable fixed footer
        $('#fixedfooter').click(function () {
            if ($('#fixedfooter').is(':checked')) {
                $('#boxedlayout').prop('checked', false);
                $("body").removeClass('boxed-layout');
                $(".footer").addClass('fixed');

                if (localStorageSupport) {
                    localStorage.setItem("boxedlayout", 'off');
                }

                if (localStorageSupport) {
                    localStorage.setItem("fixedfooter", 'on');
                }
            } else {
                $(".footer").removeClass('fixed');

                if (localStorageSupport) {
                    localStorage.setItem("fixedfooter", 'off');
                }
            }
        });

        // SKIN Select
        $('.spin-icon').click(function () {
            $(".theme-config-box").toggleClass("show");
        });

        // Default skin
        $('.s-skin-0').click(function () {
            $("body").removeClass("skin-1");
            $("body").removeClass("skin-2");
            $("body").removeClass("skin-3");
        });

        // Blue skin
        $('.s-skin-1').click(function () {
            $("body").removeClass("skin-2");
            $("body").removeClass("skin-3");
            $("body").addClass("skin-1");
        });

        // Inspinia ultra skin
        $('.s-skin-2').click(function () {
            $("body").removeClass("skin-1");
            $("body").removeClass("skin-3");
            $("body").addClass("skin-2");
        });

        // Yellow skin
        $('.s-skin-3').click(function () {
            $("body").removeClass("skin-1");
            $("body").removeClass("skin-2");
            $("body").addClass("skin-3");
        });

        if (localStorageSupport) {
            var collapse = localStorage.getItem("collapse_menu");
            var fixedsidebar = localStorage.getItem("fixedsidebar");
            var fixednavbar = localStorage.getItem("fixednavbar");
            var fixednavbar2 = localStorage.getItem("fixednavbar2");
            var boxedlayout = localStorage.getItem("boxedlayout");
            var fixedfooter = localStorage.getItem("fixedfooter");

            if (collapse == 'on') {
                $('#collapsemenu').prop('checked', 'checked')
            }
            if (fixedsidebar == 'on') {
                $('#fixedsidebar').prop('checked', 'checked')
            }
            if (fixednavbar == 'on') {
                $('#fixednavbar').prop('checked', 'checked')
            }
            if (fixednavbar2 == 'on') {
                $('#fixednavbar2').prop('checked', 'checked')
            }
            if (boxedlayout == 'on') {
                $('#boxedlayout').prop('checked', 'checked')
            }
            if (fixedfooter == 'on') {
                $('#fixedfooter').prop('checked', 'checked')
            }
        }





        function goBack() {
            window.history.back();
        }


        $(function () {
            pdfMake.fonts = {
                THSarabun: {
                    normal: 'THSarabun.ttf',
                    bold: 'THSarabun Bold.ttf',
                    italics: 'THSarabun Italic.ttf',
                    bolditalics: 'THSarabun BoldItalic.ttf'
                },
                Roboto: {
                    normal: 'Roboto-Regular.ttf',
                    bold: 'Roboto-Medium.ttf',
                    italics: 'Roboto-Italic.ttf',
                    bolditalics: 'Roboto-MediumItalic.ttf'
                }
            }


            $('#dt1').DataTable({
                responsive: true,
                dom: '<"html5buttons"B>lTfgitp',

                buttons: [
                    //{
                    //    extend: 'colvis',
                    //    text: '<i class="fa fa-eye"></i> ซ่อน/แสดง',
                    //    titleAttr: 'Hide',
                    //    postfixButtons: ['colvisRestore']
                    //},
                    {
                        extend: 'pdfHtml5',
                        text: '<i class="fa fa-file-pdf-o"></i> PDF',
                        titleAttr: 'PDF',
                        pageSize: 'A4',   // ขนาดหน้ากระดาษเป็น A4
                        //orientation: 'landscape',
                        customize: function (doc) {
                            doc.defaultStyle = {
                                font: 'THSarabun',
                                fontSize: '12',

                            };

                            //Create a date string that we use in the footer. Format is dd-mm-yyyy
                            var now = new Date();
                            var jsDate = now.getDate() + '-' + (now.getMonth() + 1) + '-' + now.getFullYear();
                            doc['footer'] = (function (page, pages) {
                                return {
                                    columns:
                                        [
                                            {
                                                alignment: 'center',
                                                text: ['Created on: ', { text: jsDate.toString() }]
                                            },
                                            {
                                                alignment: 'right',
                                                text: ['page ', { text: page.toString() }, ' of ', { text: pages.toString() }]
                                            }
                                        ],
                                    margin: 10
                                }
                            });
                        }
                    },
                    {
                        extend: 'excelHtml5',
                        text: '<i class="fa fa-file-excel-o"></i> Excel',
                        titleAttr: 'Excel',
                        autoFilter: true
                    },
                    {
                        extend: 'copyHtml5',
                        text: '<i class="fa fa-files-o"></i> Copy',
                        titleAttr: 'Copy'
                    },
                    {
                        text: 'JSON',
                        action: function (e, dt, button, config) {
                            var data = dt.buttons.exportData();
                            $.fn.dataTable.fileSave(
                                new Blob([JSON.stringify(data)]),
                                'Export.json'
                            );
                        }
                    }
                    //,
                    //{
                    //    extend: 'selectAll'
                    //},
                    //{
                    //    extend: 'selectNone'
                    //}


                ]

            })
        })

    </script>

    <script>
        $(function () {
            setNavigation();
        });

        function setNavigation() {
            var path = window.location.pathname;
            path = path[0] == '/' ? path.substr(1) : path; //it will remove the dash in the URL
            path = '/' + path;

            $("ul.metismenu a").each(function () {
                var href = $(this).attr('href');
                if (path.substring(0, href.length) === href) {
                    $(this).closest('li').addClass('active');
                }

            });

            $("ul.metismenu .nav-second-level a").each(function () {
                var href = $(this).attr('href');
                if (path.substring(0, href.length) === href) {
                    $(this).parent().parent().closest('li').addClass('active');
                    $(this).closest('ul').addClass('in');
                }

            });

        }

    </script>


    <script>

        if ($('#erp li').length == 0) {
            $('#erp_head').hide();
        }
        if ($('#setting li').length == 0) {
            $('#setting_head').hide();
        }
        if ($('#purchase li').length == 0) {
            $('#purchase_head').hide();
        }

        if ($('#setting li').length == 0) {
            $('#setting_head').hide();
        }

        if ($('#erp_page li').length == 0) {
            $('#erp_pagenav').hide();
        }
        if ($('#report_storeul li').length == 0) {
            $('#report_store').hide();
        }



    </script>

    <!-- Tooltip -->
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>

    <script>


        //setInterval(function () { alert('@Context.Session.GetInt32("Userid")'); } , 3000);
    </script>

    <script>
        var x = document.getElementById("demo");

        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition);
            } else {
                x.innerHTML = "Geolocation is not supported by this browser.";
            }
        }

        function showPosition(position) {
            x.innerHTML = "<b>Latitude: </b>" + position.coords.latitude + "<b> Longitude: </b>" + position.coords.longitude;
        }
    </script>



    <script>

        function setCookie(cname, cvalue, exdays) {
            var d = new Date();
            d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
            var expires = "expires=" + d.toGMTString();
            document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
        }


        function getCookie(cname) {
            var name = cname + "=";
            var decodedCookie = decodeURIComponent(document.cookie);
            var ca = decodedCookie.split(';');
            for (var i = 0; i < ca.length; i++) {
                var c = ca[i];
                while (c.charAt(0) == ' ') {
                    c = c.substring(1);
                }
                if (c.indexOf(name) == 0) {
                    return c.substring(name.length, c.length);
                }
            }
            return "";
        }


        document.getElementById('countjoerror').innerHTML = getCookie("countjoerror");
        document.getElementById('countledgererror').innerHTML = getCookie("countledgererror");
        document.getElementById('countpoerror').innerHTML = getCookie("countpoerror");
        document.getElementById('countGRerror').innerHTML = getCookie("countGRerror");


        document.getElementById('counterp').innerHTML = parseInt(getCookie("countjoerror")) + parseInt(getCookie("countledgererror")) + parseInt(getCookie("countpoerror")) + parseInt(getCookie("countGRerror"));



        //$(document).ready(function () {

        //    // Set idle time
        //    $(document).idleTimer(15000);

        //});

        //$(document).on("idle.idleTimer", function (event, elem, obj) {
        //    toastr.options = {
        //        "positionClass": "toast-top-right",
        //        "timeOut": 15000
        //    }

        //    toastr.warning('เข้าสู่โหมดพัก', 'Swith Mode');
        //    $('.custom-alert').fadeIn();
        //    $('.custom-alert-active').fadeOut();

        //});

        //$(document).on("active.idleTimer", function (event, elem, obj, triggerevent) {
        //    // function you want to fire when the user becomes active again
        //    toastr.clear();
        //    $('.custom-alert').fadeOut();
        //    toastr.success('โหมดปกติ', 'You are back. ');
        //});
    </script>





    <script>
        // Single Image Modal
        $('.modaal-image').modaal({
            type: 'image',
            before_image_change: function (current, incoming) {
                //console.log('change image from', current, incoming );
            },
            after_image_change: function (current) {
                //console.log('image has changed to', current );
            }
        });

    </script>



    @RenderSection("Scripts", required: false)
</body>

</html>
